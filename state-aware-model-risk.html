<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Regime-Aware Model Risk Visualization | Hannah Attar</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />

  <!-- Page-local polish (so you don't have to rewire your whole site) -->
  <style>
    /* --- Layout helpers --- */
    .detail { padding-bottom: 48px; }
    .pro-wrap{ max-width: 980px; margin: 0 auto; padding: 0 18px; }
    .detail-back{ display:inline-flex; gap:10px; align-items:center; margin:18px 0 8px; font-weight:600; }

    /* --- Hero --- */
    .hero{
      padding: 22px 0 10px;
      border-bottom: 1px solid rgba(17,24,39,0.08);
      margin-bottom: 18px;
    }
    .kicker{
      letter-spacing: .12em;
      text-transform: uppercase;
      font-size: 12px;
      color: rgba(17,24,39,.58);
      font-weight: 700;
    }
    .title{
      margin: 10px 0 8px;
      font-size: 34px;
      line-height: 1.15;
      letter-spacing: -0.02em;
    }
    .subtitle{
      margin: 0 0 14px;
      font-size: 16px;
      color: rgba(17,24,39,.72);
      max-width: 70ch;
    }

    .meta-grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px 18px;
      margin-top: 14px;
      padding: 14px 14px;
      border: 1px solid rgba(17,24,39,0.10);
      border-radius: 14px;
      background: rgba(255,255,255,0.7);
    }
    .meta-item{ font-size: 13px; color: rgba(17,24,39,.74); }
    .meta-item span{ font-weight: 700; color: rgba(17,24,39,.88); margin-right: 6px; }

    .actions{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 14px;
    }
    .btn-pro{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 13px;
      border: 1px solid rgba(17,24,39,0.12);
      background: rgba(255,255,255,.92);
      color: rgba(17,24,39,.92);
      text-decoration:none;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    }
    .btn-pro:hover{
      transform: translateY(-1px);
      border-color: rgba(17,24,39,0.22);
      box-shadow: 0 10px 26px rgba(0,0,0,.08);
      text-decoration:none;
    }
    .btn-primary{
      background: rgba(17,24,39,.92);
      color: #fff;
      border-color: rgba(17,24,39,.92);
    }
    .btn-primary:hover{ border-color: rgba(17,24,39,1); }

    /* --- Sections --- */
    .sec{ margin: 26px 0; }
    .sec h2{
      font-size: 18px;
      margin: 0 0 10px;
      letter-spacing: -0.01em;
    }
    .sec p{ margin: 0 0 10px; color: rgba(17,24,39,.78); max-width: 78ch; }
    .muted{ color: rgba(17,24,39,.66); }

    /* --- Quick read / cards --- */
    .grid-2{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
      align-items:start;
    }
    .card{
      border: 1px solid rgba(17,24,39,0.10);
      border-radius: 16px;
      background: rgba(255,255,255,.78);
      padding: 14px 14px;
      box-shadow: 0 1px 2px rgba(0,0,0,.04);
    }
    .card h3{
      margin: 0 0 8px;
      font-size: 14px;
      letter-spacing: .02em;
      text-transform: uppercase;
      color: rgba(17,24,39,.72);
    }
    .bullets{ margin: 0; padding-left: 18px; color: rgba(17,24,39,.78); }
    .bullets li{ margin: 6px 0; }

    .kpis{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    .kpi{
      border: 1px solid rgba(17,24,39,0.10);
      border-radius: 14px;
      padding: 10px 10px;
      background: rgba(255,255,255,.86);
    }
    .kpi .label{ font-size: 12px; color: rgba(17,24,39,.62); font-weight: 700; }
    .kpi .value{ font-size: 16px; font-weight: 800; color: rgba(17,24,39,.92); margin-top: 2px; }
    .kpi .note{ font-size: 12px; color: rgba(17,24,39,.66); margin-top: 2px; line-height: 1.35; }

    /* --- Results layout --- */
    .results-grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 18px;
      align-items:start;
    }
    .mini{
      font-size: 13px;
      color: rgba(17,24,39,.74);
      margin-top: 6px;
    }

    /* --- Figures: smaller, consistent, professional --- */
    .fig{
      margin: 0 0 12px;
      border: 1px solid rgba(17,24,39,0.10);
      border-radius: 16px;
      background: rgba(255,255,255,.85);
      overflow:hidden;
    }
    .fig-top{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 12px;
      border-bottom: 1px solid rgba(17,24,39,0.08);
      align-items:baseline;
    }
    .fig-title{
      font-weight: 800;
      font-size: 13px;
      color: rgba(17,24,39,.90);
    }
    .fig-cap{
      font-size: 12px;
      color: rgba(17,24,39,.62);
      margin-left: auto;
    }
    .fig-body{ padding: 10px 12px 12px; }
    .figimg{
      width: 100%;
      height: auto;
      display:block;
      border-radius: 12px;
      cursor: zoom-in;
    }
    .fig-note{
      margin-top: 8px;
      font-size: 12px;
      color: rgba(17,24,39,.66);
      line-height: 1.45;
    }

    /* --- Tiny table --- */
    .table{
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      color: rgba(17,24,39,.78);
    }
    .table th, .table td{
      padding: 8px 10px;
      border-bottom: 1px solid rgba(17,24,39,0.10);
      text-align:left;
      vertical-align:top;
    }
    .table th{ color: rgba(17,24,39,.86); font-weight: 800; font-size: 12px; text-transform: uppercase; letter-spacing: .06em; }

    /* --- Lightbox --- */
    .lb{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.72);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 22px;
      z-index: 999;
    }
    .lb.open{ display:flex; }
    .lb-inner{
      max-width: min(1100px, 96vw);
      max-height: 92vh;
    }
    .lb-img{
      width: 100%;
      height: auto;
      max-height: 92vh;
      display:block;
      border-radius: 14px;
      cursor: zoom-out;
      background: #fff;
    }
    .lb-x{
      position:absolute;
      top: 14px;
      right: 14px;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(0,0,0,.25);
      color:#fff;
      font-weight:900;
      font-size:18px;
      line-height:40px;
      text-align:center;
      cursor:pointer;
      user-select:none;
    }

    /* --- Footer --- */
    .footer{
      margin-top: 34px;
      padding-top: 16px;
      border-top: 1px solid rgba(17,24,39,0.08);
      color: rgba(17,24,39,.58);
      font-size: 13px;
    }

    /* --- Responsive --- */
    @media (max-width: 860px){
      .grid-2, .results-grid{ grid-template-columns: 1fr; }
      .title{ font-size: 30px; }
      .meta-grid{ grid-template-columns: 1fr; }
      .kpis{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>

  <!-- Top navigation -->
  <div class="topbar">
    <div class="topbar-inner">
      <a class="site-title" href="index.html">Hannah Attar</a>
      <div class="topnav">
        <a href="projects.html">Projects</a>
        <a href="experience.html">Experience</a>
        <a href="assets/pdfs/Attar_Resume_2025.pdf" target="_blank" rel="noopener">Resume</a>
      </div>
    </div>
  </div>

  <div class="detail">
    <div class="pro-wrap">
      <a class="detail-back" href="projects.html">← Back to Projects</a>

      <!-- HERO -->
      <header class="hero">
        <div class="kicker">Project Report</div>
        <h1 class="title">Regime-Aware Model Risk Visualization</h1>
        <p class="subtitle">
          A diagnostic study showing that a model’s reliability is <strong>state-dependent</strong>, and that
          disciplined deployment rules (confidence + regime) can improve risk outcomes even when daily prediction is weak.
        </p>

        <div class="actions">
          <a class="btn-pro btn-primary" href="assets/pdfs/Regime_Aware_Model_Risk_Visualization.pdf" target="_blank" rel="noopener">
            Download paper (PDF) →
        </div>

        <div class="meta-grid">
          <div class="meta-item"><span>Asset</span> SPY, daily (2006–2025)</div>
          <div class="meta-item"><span>Sample</span> N = 5,007 (70% train / 30% test)</div>
          <div class="meta-item"><span>Regimes</span> GMM on (ret5, vol10, vol20)</div>
          <div class="meta-item"><span>Predictor</span> Logistic regression on (ret5, vol20)</div>
          <div class="meta-item"><span>Confidence</span> |p − 0.5|</div>
          <div class="meta-item"><span>Goal</span> Evaluation + deployment discipline</div>
        </div>
      </header>

      <!-- QUICK READ -->
      <section class="sec">
        <div class="grid-2">
          <div class="card">
            <h3>Executive Summary</h3>
            <ul class="bullets">
              <li>Daily equity direction prediction is noisy, and predicted probabilities are compressed near 0.5.</li>
              <li>Regimes inferred from returns + realized volatility form persistent market states, not random “clusters.”</li>
              <li>Model reliability varies materially by regime, so “average” metrics hide failure modes.</li>
              <li>Filtering trades by confidence and disabling execution in a high-risk regime improves the strategy’s risk profile.</li>
            </ul>
          </div>

          <div class="card">
            <h3>Key numbers (out-of-sample)</h3>
            <div class="kpis">
              <div class="kpi">
                <div class="label">Brier score</div>
                <div class="value">0.247</div>
                <div class="note">Close to an uninformative baseline, consistent with probability compression.</div>
              </div>
              <div class="kpi">
                <div class="label">Confidence (|p−0.5|)</div>
                <div class="value">mean 0.0498</div>
                <div class="note">Std 0.0121, max 0.1008 (test N=1,503).</div>
              </div>
              <div class="kpi">
                <div class="label">Regime Sharpe (best)</div>
                <div class="value">1.38</div>
                <div class="note">Strategy performance concentrates in certain regimes.</div>
              </div>
              <div class="kpi">
                <div class="label">High-vol regime</div>
                <div class="value">unstable</div>
                <div class="note">Regime 3 shows poor/undefined Sharpe and degraded reliability.</div>
              </div>
            </div>
            <p class="mini">
              Metrics reported are gross of trading frictions and used primarily for diagnostic comparison.
            </p>
          </div>
        </div>
      </section>

      <!-- WHAT THIS PROJECT IS -->
      <section class="sec">
        <h2>What this demonstrates</h2>
        <div class="card">
          <ul class="bullets">
            <li><strong>Model risk is conditional:</strong> a “single” classifier behaves differently depending on the state distribution it operates under.</li>
            <li><strong>Confidence is not enough:</strong> the confidence-accuracy relationship changes by regime, especially in high volatility.</li>
            <li><strong>Prediction ≠ deployment:</strong> economic outcomes are strongly influenced by when you choose to trade, not just what the model predicts.</li>
          </ul>
        </div>
      </section>

      <!-- RESULTS -->
      <section class="sec">
        <h2>Results</h2>

        <div class="results-grid">

          <!-- Left: narrative -->
          <div class="card">
            <h3>Findings</h3>
            <ul class="bullets">
              <li><strong>Regimes persist and cluster in stress periods.</strong> The inferred high-volatility state concentrates around extended market stress, consistent with volatility clustering.</li>
              <li><strong>Reliability is regime-dependent.</strong> Accuracy patterns differ by regime; the high-volatility regime shows more erratic confidence-stratified behavior (small samples amplify variability).</li>
              <li><strong>Feature-space separation explains it.</strong> Regimes occupy distinct regions in (ret5, vol20), so a single global decision rule effectively faces different operating conditions.</li>
              <li><strong>Probabilities are compressed.</strong> Outputs stay near the unconditional mean; probabilities work better as low-amplitude signals than as literal calibrated forecasts.</li>
              <li><strong>Deployment rules change the risk profile.</strong> Confidence filtering plus deactivating the high-risk regime primarily reduces drawdown depth and return volatility rather than magically increasing raw accuracy.</li>
            </ul>

            <h3 style="margin-top:14px;">Regime-level strategy Sharpe (OOS)</h3>
            <table class="table" aria-label="Sharpe ratios by regime">
              <thead>
                <tr><th>Regime</th><th>Sharpe</th><th>Interpretation</th></tr>
              </thead>
              <tbody>
                <tr><td>0</td><td>1.38</td><td>Strongest contribution in this regime.</td></tr>
                <tr><td>1</td><td>0.41</td><td>Positive but modest.</td></tr>
                <tr><td>2</td><td>0.22</td><td>Low but positive.</td></tr>
                <tr><td>3</td><td>NaN</td><td>Unstable / adverse high-volatility state.</td></tr>
              </tbody>
            </table>

            <p class="mini">
              Confidence filter used in the strategy: trade only when <strong>|p−0.5| &gt; 0.02</strong>, and deactivate execution during the high-risk regime.
            </p>
          </div>

          <div class="card" style="margin-top:14px;">
  <h3>Methods (Pipeline)</h3>

  <ol class="pipe">
    <li>
      <span class="pipe-step">1</span>
      <div class="pipe-body">
        <div class="pipe-title">Data</div>
        <div class="pipe-text">SPY daily closes (2006–2025). Chronological split: 70% train, 30% test.</div>
      </div>
    </li>
    <li>
      <span class="pipe-step">2</span>
      <div class="pipe-body">
        <div class="pipe-title">Features</div>
        <div class="pipe-text">Recent returns + realized volatility: ret5, vol10, vol20 (standardized on train).</div>
      </div>
    </li>
    <li>
      <span class="pipe-step">3</span>
      <div class="pipe-body">
        <div class="pipe-title">Regimes (Unsupervised)</div>
        <div class="pipe-text">Gaussian Mixture Model on (ret5, vol10, vol20) fit on train, applied forward.</div>
      </div>
    </li>
    <li>
      <span class="pipe-step">4</span>
      <div class="pipe-body">
        <div class="pipe-title">Prediction (Supervised)</div>
        <div class="pipe-text">Logistic regression predicts next-day direction using (ret5, vol20).</div>
      </div>
    </li>
    <li>
      <span class="pipe-step">5</span>
      <div class="pipe-body">
        <div class="pipe-title">Confidence</div>
        <div class="pipe-text">Use |p − 0.5| as a scalar conviction score for stratification and filtering.</div>
      </div>
    </li>
    <li>
      <span class="pipe-step">6</span>
      <div class="pipe-body">
        <div class="pipe-title">Deployment Rule</div>
        <div class="pipe-text">Trade only if |p−0.5| &gt; 0.02 and deactivate execution in the high-risk regime.</div>
      </div>
    </li>
    <li>
      <span class="pipe-step">7</span>
      <div class="pipe-body">
        <div class="pipe-title">Evaluation</div>
        <div class="pipe-text">OOS accuracy by confidence/regime + strategy Sharpe & max drawdown (gross of costs).</div>
      </div>
    </li>
  </ol>
</div>


          <!-- Right: figures -->
          <div>
            <div class="fig">
              <div class="fig-top">
                <div class="fig-title">Regime timeline</div>
                <div class="fig-cap">Figure 1</div>
              </div>
              <div class="fig-body">
                <img class="figimg" src="assets/images/1.png" alt="Inferred market regimes over time" data-zoom>
                <div class="fig-note">High-vol regime clusters around prolonged stress episodes, supporting interpretation as persistent market states.</div>
              </div>
            </div>

            <div class="fig">
              <div class="fig-top">
                <div class="fig-title">Accuracy vs confidence, by regime</div>
                <div class="fig-cap">Figure 2</div>
              </div>
              <div class="fig-body">
                <img class="figimg" src="assets/images/2.png" alt="Out-of-sample accuracy versus confidence by regime" data-zoom>
                <div class="fig-note">Confidence is not universally monotonic. High-vol regime shows degraded stability (and smaller bin counts).</div>
              </div>
            </div>

            <div class="fig">
              <div class="fig-top">
                <div class="fig-title">Equity curve (OOS)</div>
                <div class="fig-cap">Figure 3</div>
              </div>
              <div class="fig-body">
                <img class="figimg" src="assets/images/3.png" alt="Out-of-sample strategy equity curve" data-zoom>
                <div class="fig-note">Selective deployment changes drawdowns/volatility more than it changes raw predictive metrics. Gross of costs.</div>
              </div>
            </div>

            <div class="fig">
              <div class="fig-top">
                <div class="fig-title">Probability field + regimes</div>
                <div class="fig-cap">Figure 4</div>
              </div>
              <div class="fig-body">
                <img class="figimg" src="assets/images/4.png" alt="Logistic probability field with inferred regimes" data-zoom>
                <div class="fig-note">Regimes occupy distinct areas of (ret5, vol20), providing a geometric explanation for state-dependent behavior.</div>
              </div>
            </div>

            <div class="fig">
              <div class="fig-top">
                <div class="fig-title">Probability compression</div>
                <div class="fig-cap">Figure 5</div>
              </div>
              <div class="fig-body">
                <img class="figimg" src="assets/images/5.png" alt="Distribution of predicted probabilities" data-zoom>
                <div class="fig-note">Predicted probabilities concentrate near the unconditional mean, motivating thresholded deployment.</div>
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- INTERPRETATION -->
      <section class="sec">
        <h2>Interpretation and limitations</h2>
        <div class="card">
          <ul class="bullets">
            <li><strong>Diagnostic, not “alpha claims.”</strong> The point is to map failure modes and decide when not to trade.</li>
            <li><strong>Costs not modeled.</strong> Results are gross of transaction costs, slippage, and financing/short constraints.</li>
            <li><strong>Small samples in extreme regimes.</strong> High-volatility regime bins can be thin; interpret bin-level spikes cautiously.</li>
            <li><strong>Next steps.</strong> Richer features, alternative regime definitions, and explicit execution costs would make the deployment test more realistic.</li>
          </ul>
        </div>
      </section>

      <div class="footer">
        © <span id="y"></span> Hannah Attar
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lb" id="lb" aria-hidden="true">
    <div class="lb-x" id="lbClose" aria-label="Close">×</div>
    <div class="lb-inner">
      <img class="lb-img" id="lbImg" alt="Expanded figure">
    </div>
  </div>

  <script>
    // Footer year
    const y = document.getElementById("y");
    if (y) y.textContent = new Date().getFullYear();

    // Minimal lightbox for figures
    const lb = document.getElementById("lb");
    const lbImg = document.getElementById("lbImg");
    const lbClose = document.getElementById("lbClose");

    function openLB(src, alt){
      lbImg.src = src;
      lbImg.alt = alt || "Expanded figure";
      lb.classList.add("open");
      lb.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }
    function closeLB(){
      lb.classList.remove("open");
      lb.setAttribute("aria-hidden", "true");
      lbImg.src = "";
      document.body.style.overflow = "";
    }

    document.querySelectorAll("[data-zoom]").forEach(img => {
      img.addEventListener("click", () => openLB(img.src, img.alt));
      img.addEventListener("keypress", (e) => {
        if (e.key === "Enter" || e.key === " ") openLB(img.src, img.alt);
      });
      img.tabIndex = 0;
      img.style.outline = "none";
    });

    lb.addEventListener("click", (e) => {
      if (e.target === lb || e.target === lbImg) closeLB();
    });
    lbClose.addEventListener("click", closeLB);
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && lb.classList.contains("open")) closeLB();
    });
  </script>

</body>
</html>

